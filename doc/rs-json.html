<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>RS-JSON</title>
  <style type="text/css">
   *{margin:0;border:0;padding:0}
   body{color:#000;background-color:#fff;font-family:sans-serif;padding:1em;min-width:46em}
   a{color:inherit;background-color:transparent;text-decoration:none}
   table{border-collapse:collapse}
   div.title{padding:1em}
   div.subtitle{padding:1em}
   div.prologue{padding:1em}
   div.epilogue{padding:1em}
   span.category{color:#212121;font-style:italic}
   span.package,span.symbol{color:#212121;font-weight:700;white-space:nowrap}
   span.lambda-list{color:#616161}
   span.lambda-list-keyword{color:#388E3C;white-space:nowrap}
   span.keyword{color:#212121;white-space:nowrap}
   span.variable{color:#212121;font-style:italic;white-space:nowrap}
   span.init-form{white-space:nowrap}
   span.method-specializers{color:#616161}
   span.method-specializer{color:#212121;white-space:nowrap}
   span.method-qualifier{color:#212121;white-space:nowrap}
   span.error{color:#f57c00}
   div.contents{padding:1em}
   div.contents-listing{padding:1em}
   div.contents-listing ul{list-style-type:none}
   @media all and (min-width:68em){div.contents-listing{column-count:2;column-gap:2em}}
   div.definition{padding:1em}
   div.signature{background-color:#F5F5F5;padding:1ex 1em}
   table.signature td.symbol{text-align:left;vertical-align:baseline;white-space:nowrap;padding-right:.5em}
   table.signature td.lambda-list{text-align:left;vertical-align:baseline;width:100%}
   table.signature td.category{text-align:right;vertical-align:baseline;white-space:nowrap;padding-left:1.5em}
   div.documentation{padding:1em}
  </style>
 </head>
 <body>
  <div class="title">
   <h1>RS-JSON</h1>
  </div>
  <div class="prologue">
   <pre>Yet another JSON decoder/encoder.

If you can't wait until YASON is fixed, then this library is for you.
The main differences are listed below.

   * The parser is strictly RFC 8259 compliant where it makes sense.
     However, you can tweak the behavior of the parser to suite your
     needs.

   * The serializer only supports a compact pretty printing format.

   * JSON objects can be represented as hash-tables, associated lists,
     or property lists.  The default is to use alists.

   * JSON arrays can be represented as vectors or lists.  The default
     is to use vectors.

   * The JSON values ‘true’, ‘false’, and ‘null’ are represented by
     the keywords ‘:true’, ‘:false’, and ‘:null’ respectively.  But
     you can change that to suite your needs.

   * The default configuration is round-trip save, i.e. you can read
     a JSON value and write it back without loss of information.  This
     is a strict requirement when updating a web resource via an HTTP
     GET/PUT cycle.

   * Performance is competitive to other “fast” JSON libraries out
     there.</pre>
  </div>
  <div class="contents" id="contents">
   <h2>Contents</h2>
   <div class="contents-listing">
    <ul>
     <li>
      <a href="#urzpx82v">
       <span class="category">Condition</span>
       <span class="symbol">encoding-error</span>
      </a>
     </li>
     <li>
      <a href="#jf4vkem3">
       <span class="category">Condition</span>
       <span class="symbol">json-error</span>
      </a>
     </li>
     <li>
      <a href="#sacacfxu">
       <span class="category">Condition</span>
       <span class="symbol">syntax-error</span>
      </a>
     </li>
     <li>
      <a href="#hkv47zbo">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-duplicate-object-keys*</span>
      </a>
     </li>
     <li>
      <a href="#ogevcxtm">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-lax-numbers*</span>
      </a>
     </li>
     <li>
      <a href="#gy3kz8dl">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-literal-object-keys*</span>
      </a>
     </li>
     <li>
      <a href="#hamopjcj">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-trailing-comma*</span>
      </a>
     </li>
     <li>
      <a href="#vafwigtp">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-unicode-graphic*</span>
      </a>
     </li>
     <li>
      <a href="#sbav8nmd">
       <span class="category">Special Variable</span>
       <span class="symbol">*allow-unicode-whitespace*</span>
      </a>
     </li>
     <li>
      <a href="#won4buuv">
       <span class="category">Special Variable</span>
       <span class="symbol">*array-as*</span>
      </a>
     </li>
     <li>
      <a href="#hxdnxn58">
       <span class="category">Special Variable</span>
       <span class="symbol">*decode-array-hook*</span>
      </a>
     </li>
     <li>
      <a href="#xhl5qaoi">
       <span class="category">Special Variable</span>
       <span class="symbol">*decode-object-hook*</span>
      </a>
     </li>
     <li>
      <a href="#vqyldfja">
       <span class="category">Special Variable</span>
       <span class="symbol">*encode-symbol-hook*</span>
      </a>
     </li>
     <li>
      <a href="#kqdrbelo">
       <span class="category">Special Variable</span>
       <span class="symbol">*false*</span>
      </a>
     </li>
     <li>
      <a href="#kz8bt32s">
       <span class="category">Special Variable</span>
       <span class="symbol">*list-encoder*</span>
      </a>
     </li>
     <li>
      <a href="#wo3o8owi">
       <span class="category">Special Variable</span>
       <span class="symbol">*maximum-nesting-depth*</span>
      </a>
     </li>
     <li>
      <a href="#bzgbiy7g">
       <span class="category">Special Variable</span>
       <span class="symbol">*nil-encoder*</span>
      </a>
     </li>
     <li>
      <a href="#q4ynhqef">
       <span class="category">Special Variable</span>
       <span class="symbol">*null*</span>
      </a>
     </li>
     <li>
      <a href="#p8dkkdin">
       <span class="category">Special Variable</span>
       <span class="symbol">*object-as*</span>
      </a>
     </li>
     <li>
      <a href="#hnddauqc">
       <span class="category">Special Variable</span>
       <span class="symbol">*object-key-decoder*</span>
      </a>
     </li>
     <li>
      <a href="#vddbknv2">
       <span class="category">Special Variable</span>
       <span class="symbol">*true*</span>
      </a>
     </li>
     <li>
      <a href="#vubbdqg4">
       <span class="category">Function</span>
       <span class="symbol">array-element</span>
      </a>
     </li>
     <li>
      <a href="#sgtiipkk">
       <span class="category">Generic Function</span>
       <span class="symbol">encode</span>
      </a>
     </li>
     <li>
      <a href="#arqa2l7k">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">list</span>)</span>
      </a>
     </li>
     <li>
      <a href="#oohs53bf">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">real</span>)</span>
      </a>
     </li>
     <li>
      <a href="#awwfrk2c">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">rational</span>)</span>
      </a>
     </li>
     <li>
      <a href="#ldljujwh">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">integer</span>)</span>
      </a>
     </li>
     <li>
      <a href="#twlwmvo3">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">character</span>)</span>
      </a>
     </li>
     <li>
      <a href="#p7yrahty">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">symbol</span>)</span>
      </a>
     </li>
     <li>
      <a href="#txxhnfrz">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">string</span>)</span>
      </a>
     </li>
     <li>
      <a href="#wwsudco5">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">(eql nil)</span>)</span>
      </a>
     </li>
     <li>
      <a href="#pbrh4daj">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">(eql t)</span>)</span>
      </a>
     </li>
     <li>
      <a href="#giqfu8dq">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">(eql :null)</span>)</span>
      </a>
     </li>
     <li>
      <a href="#mvazsind">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">(eql :false)</span>)</span>
      </a>
     </li>
     <li>
      <a href="#drcaf5pn">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">(eql :true)</span>)</span>
      </a>
     </li>
     <li>
      <a href="#fbjovpce">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">vector</span>)</span>
      </a>
     </li>
     <li>
      <a href="#jpiol7fg">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">hash-table</span>)</span>
      </a>
     </li>
     <li>
      <a href="#gjifsmgf">
       <span class="category">Method</span>
       <span class="symbol">encode</span>
       <span class="method-specializers">(<span class="method-specializer">t</span>)</span>
      </a>
     </li>
     <li>
      <a href="#hhycg357">
       <span class="category">Function</span>
       <span class="symbol">encode-array</span>
      </a>
     </li>
     <li>
      <a href="#rmwttplq">
       <span class="category">Function</span>
       <span class="symbol">encode-false</span>
      </a>
     </li>
     <li>
      <a href="#ntl25f58">
       <span class="category">Function</span>
       <span class="symbol">encode-list</span>
      </a>
     </li>
     <li>
      <a href="#zo2sttpj">
       <span class="category">Function</span>
       <span class="symbol">encode-null</span>
      </a>
     </li>
     <li>
      <a href="#pjb5bkh2">
       <span class="category">Function</span>
       <span class="symbol">encode-object</span>
      </a>
     </li>
     <li>
      <a href="#pbpmsoka">
       <span class="category">Function</span>
       <span class="symbol">object-member</span>
      </a>
     </li>
     <li>
      <a href="#p8bs7kiw">
       <span class="category">Function</span>
       <span class="symbol">parse</span>
      </a>
     </li>
     <li>
      <a href="#gb3jzxlt">
       <span class="category">Function</span>
       <span class="symbol">serialize</span>
      </a>
     </li>
     <li>
      <a href="#w5g4wwig">
       <span class="category">Constant</span>
       <span class="symbol">serializer</span>
      </a>
     </li>
     <li>
      <a href="#hk3d2sdm">
       <span class="category">Function</span>
       <span class="symbol">serializer</span>
      </a>
     </li>
     <li>
      <a href="#clobtzta">
       <span class="category">Macro</span>
       <span class="symbol">with-array</span>
      </a>
     </li>
     <li>
      <a href="#nzljpmtz">
       <span class="category">Macro</span>
       <span class="symbol">with-default-values</span>
      </a>
     </li>
     <li>
      <a href="#wmbtovb5">
       <span class="category">Macro</span>
       <span class="symbol">with-object</span>
      </a>
     </li>
    </ul>
   </div>
  </div>
  <div class="dictionary">
   <div class="definition" id="urzpx82v">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encoding-error</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Condition</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Condition type for an encoding error.

Class precedence list:

     ‘encoding-error’, ‘<a href="#jf4vkem3"><span class="symbol">json-error</span></a>’, ...</pre>
    </div>
   </div>
   <div class="definition" id="jf4vkem3">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">json-error</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Condition</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Base class for all JSON errors.

Class precedence list:

     ‘json-error’, ‘stream-error’, ‘error’, ...</pre>
    </div>
   </div>
   <div class="definition" id="sacacfxu">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">syntax-error</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Condition</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Condition type for a syntax error.

Class precedence list:

     ‘syntax-error’, ‘<a href="#jf4vkem3"><span class="symbol">json-error</span></a>’, ...</pre>
    </div>
   </div>
   <div class="definition" id="hkv47zbo">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-duplicate-object-keys*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to accept duplicate keys in JSON objects.
If true, the value of an existing object member is replaced by a
successive object member with the same key.  Special value ‘:ignore’
means to ignore successive duplicate object members, i.e. the value
of an existing object member will not be replaced.  Special value
‘:append’ means to add a duplicate object member to the Lisp data
structure – this feature is only available for alists and plists.
If false, signal a ‘<a href="#sacacfxu"><span class="symbol">syntax-error</span></a>’.  This is the default.

ECMA-404 says nothing about duplicate object keys.  RFC 8259 says
that object keys should be unique.  Anyway, with this user option,
you have the choice.</pre>
    </div>
   </div>
   <div class="definition" id="ogevcxtm">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-lax-numbers*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to accept non-standard syntax of numbers.
If true, numbers may have an explicit plus sign and digits before or
after the decimal point may be omitted.  Default is false.</pre>
    </div>
   </div>
   <div class="definition" id="gy3kz8dl">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-literal-object-keys*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to accept literal names as keys of object members.
Default is false.</pre>
    </div>
   </div>
   <div class="definition" id="hamopjcj">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-trailing-comma*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to accept a comma after the last object member
or after the last array element.  Default is false.</pre>
    </div>
   </div>
   <div class="definition" id="vafwigtp">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-unicode-graphic*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to escape Unicode graphic characters in JSON strings.
If true, any Unicode graphic character is printed as is.  Otherwise,
a graphic character is escaped like any other non-graphic character.
Thus, the JSON output is plain US-ASCII.  Default is true.</pre>
    </div>
   </div>
   <div class="definition" id="sbav8nmd">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*allow-unicode-whitespace*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Whether or not to accept any Unicode whitespace character.
If true, any character with the Unicode whitespace property is
considered a whitespace character.  Otherwise, only the space,
horizontal tab, line feed, and carriage return character are
considered a whitespace character.  Default is false.</pre>
    </div>
   </div>
   <div class="definition" id="won4buuv">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*array-as*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The Lisp data structure used to represent a JSON array.
Value is either ‘:vector’ or ‘:list’.  The default is to use
vectors.

If you want to use lists, you should set the ‘<a href="#kz8bt32s"><span class="symbol">*list-encoder*</span></a>’
special variable to the ‘<a href="#hhycg357"><span class="symbol">encode-array</span></a>’ function.</pre>
    </div>
   </div>
   <div class="definition" id="hxdnxn58">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*decode-array-hook*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Hook to run after a JSON array has been decoded.
Value has to be a function designator.  The function is called with
one argument, the Lisp data structure representing the JSON array;
see the ‘<a href="#won4buuv"><span class="symbol">*array-as*</span></a>’ special variable.  The return value of the
function is used as the actual array value.</pre>
    </div>
   </div>
   <div class="definition" id="xhl5qaoi">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*decode-object-hook*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Hook to run after a JSON object has been decoded.
Value has to be a function designator.  The function is called with
one argument, the Lisp data structure representing the JSON object;
see the ‘<a href="#p8dkkdin"><span class="symbol">*object-as*</span></a>’ special variable.  The return value of the
function is used as the actual object value.</pre>
    </div>
   </div>
   <div class="definition" id="vqyldfja">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*encode-symbol-hook*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Hook to convert a symbol into a string.
Value has to be a function designator.  The function is called with
the symbol as the only argument.  The return value of the function
must be a string.

Special value ‘:upcase’, ‘:downcase’, ‘:capitalize’, ‘:preserve’, or
‘:invert’ means to change the case of the symbol name respectively.
See the ‘*print-case*’ special variable and ‘readtable-case’ function.
A value of ‘nil’ means to use the value of the ‘*print-case*’ special
variable.</pre>
    </div>
   </div>
   <div class="definition" id="kqdrbelo">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*false*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The symbol to represent the JSON value ‘false’.
Default is ‘:false’, but ‘nil’ may be appropriate, too.  For the
later, please take care of ambiguities since ‘nil’ also represents
the empty list.</pre>
    </div>
   </div>
   <div class="definition" id="kz8bt32s">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*list-encoder*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The actual function used to encode a list.

Suitable values are ‘<a href="#pjb5bkh2"><span class="symbol">encode-object</span></a>’ or ‘<a href="#hhycg357"><span class="symbol">encode-array</span></a>’ to encode
a list as a JSON object or as a JSON array respectively.  Default
is ‘<a href="#pjb5bkh2"><span class="symbol">encode-object</span></a>’ in accordance with the default value of the
‘<a href="#p8dkkdin"><span class="symbol">*object-as*</span></a>’ special variable.

The function is called with one argument, the list.  The return
value of the function is ignored.

See also the ‘<a href="#bzgbiy7g"><span class="symbol">*nil-encoder*</span></a>’ special variable.</pre>
    </div>
   </div>
   <div class="definition" id="wo3o8owi">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*maximum-nesting-depth*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The maximum number of nested JSON structures.
Value must be a positive number and should be at least 20.  A value
of ‘nil’ means to not limit the depth of nesting.  The default value
is 1000.  This option only has an effect when reading JSON values.</pre>
    </div>
   </div>
   <div class="definition" id="bzgbiy7g">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*nil-encoder*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The actual function used to encode ‘nil’.

Suitable values are ‘<a href="#ntl25f58"><span class="symbol">encode-list</span></a>’, ‘<a href="#rmwttplq"><span class="symbol">encode-false</span></a>’, or ‘<a href="#zo2sttpj"><span class="symbol">encode-null</span></a>’
to encode ‘nil’ as a list, as the JSON ‘false’ value, or as the JSON
‘null’ value respectively.  Default is ‘<a href="#ntl25f58"><span class="symbol">encode-list</span></a>’ in accordance
with the default value of the ‘<a href="#p8dkkdin"><span class="symbol">*object-as*</span></a>’ special variable.</pre>
    </div>
   </div>
   <div class="definition" id="q4ynhqef">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*null*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The symbol to represent the JSON value ‘null’.
Default is ‘:null’, but ‘nil’ may be appropriate, too.  For the
later, please take care of ambiguities since ‘nil’ also represents
falsity and the empty list.</pre>
    </div>
   </div>
   <div class="definition" id="p8dkkdin">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*object-as*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The Lisp data structure used to represent a JSON object.
Value is either ‘:hash-table’, ‘:alist’, or ‘:plist’.  The default
is to use alists.

Object keys are compared with ‘equal’, i.e. using strings as object
keys works as expected.  This also holds when representing objects
as plists.</pre>
    </div>
   </div>
   <div class="definition" id="hnddauqc">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*object-key-decoder*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The function to convert the key string of an object member.
Default is the ‘identity’ function.

The function is called with one argument, the key string.  The value
of the function is used as the key for the data structure produced.
See also the ‘<a href="#p8dkkdin"><span class="symbol">*object-as*</span></a>’ special variable.

If you want to use symbols as objects keys, the simplest solution is
to intern them into the current package.

     (let ((*object-key-decoder* #'intern)
           (*encode-symbol-hook* :preserve))
       (parse "{\"foo\" : 42}"))

      ⇒ ((|foo| . 42))

Using symbols safes some memory if you have many objects with the
same keys.  It may also speed up object member access.  But please
remember: don't speculate, profile!</pre>
    </div>
   </div>
   <div class="definition" id="vddbknv2">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">*true*</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Special Variable</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The symbol to represent the JSON value ‘true’.
Default is ‘:true’, but ‘t’ may be appropriate, too.</pre>
    </div>
   </div>
   <div class="definition" id="vubbdqg4">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">array-element</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">value</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a JSON array element.
See the ‘<a href="#clobtzta"><span class="symbol">with-array</span></a>’ macro.</pre>
    </div>
   </div>
   <div class="definition" id="sgtiipkk">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Generic Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode Lisp data as a JSON value.

Argument DATA is the Lisp data to be serialized.

The JSON output is written to the ‘*standard-output*’ stream.
The return value of an ‘encode’ method is ignored.

The ‘<a href="#wmbtovb5"><span class="symbol">with-object</span></a>’ and ‘<a href="#clobtzta"><span class="symbol">with-array</span></a>’ macros can be used to define JSON
encoders for your own Lisp data structures.  For example, define an
encoder for a CLOS class:

     (defclass bank-account ()
       ((iban
         :initarg :iban
         :initform (error "Missing IBAN argument."))
        (balance
         :initarg :balance
         :initform 0)))

     (defmethod encode ((object bank-account))
       "Encode a bank account as a JSON object."
       (with-object
         (object-member "iban" (slot-value object 'iban))
         (object-member "balance" (slot-value object 'balance))))

After that,

     (serialize t (make-instance 'bank-account :iban "DE75512108001245126199"))

prints

     {"iban" : "DE75512108001245126199", "balance" : 0}</pre>
    </div>
   </div>
   <div class="definition" id="arqa2l7k">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">list</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a list by calling ‘<a href="#kz8bt32s"><span class="symbol">*list-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="oohs53bf">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">real</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a floating-point number as a JSON number.</pre>
    </div>
   </div>
   <div class="definition" id="awwfrk2c">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">rational</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a rational number as a JSON number.
Affected by ‘*read-default-float-format*’.</pre>
    </div>
   </div>
   <div class="definition" id="ldljujwh">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">integer</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode an integer as a JSON number.</pre>
    </div>
   </div>
   <div class="definition" id="twlwmvo3">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">character</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a character as a JSON string.</pre>
    </div>
   </div>
   <div class="definition" id="p7yrahty">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">symbol</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a symbol as a JSON string.
Affected by ‘<a href="#vddbknv2"><span class="symbol">*true*</span></a>’, ‘<a href="#kqdrbelo"><span class="symbol">*false*</span></a>’, ‘<a href="#q4ynhqef"><span class="symbol">*null*</span></a>’, ‘<a href="#vqyldfja"><span class="symbol">*encode-symbol-hook*</span></a>’,
and ‘*print-case*’.

Exceptional situations:

   * Signals a ‘program-error’ if the value returned by the
     ‘<a href="#vqyldfja"><span class="symbol">*encode-symbol-hook*</span></a>’ function is not a string.</pre>
    </div>
   </div>
   <div class="definition" id="txxhnfrz">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">string</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a string as a JSON string.</pre>
    </div>
   </div>
   <div class="definition" id="wwsudco5">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">(eql nil)</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode ‘nil’ by calling ‘<a href="#bzgbiy7g"><span class="symbol">*nil-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="pbrh4daj">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">(eql t)</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode ‘t’ as a JSON ‘true’ value.</pre>
    </div>
   </div>
   <div class="definition" id="giqfu8dq">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">(eql :null)</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode ‘:null’ as a JSON ‘null’ value.</pre>
    </div>
   </div>
   <div class="definition" id="mvazsind">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">(eql :false)</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode ‘:false’ as a JSON ‘false’ value.</pre>
    </div>
   </div>
   <div class="definition" id="drcaf5pn">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">(eql :true)</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode ‘:true’ as a JSON ‘true’ value.</pre>
    </div>
   </div>
   <div class="definition" id="fbjovpce">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">vector</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a vector as a JSON array.</pre>
    </div>
   </div>
   <div class="definition" id="jpiol7fg">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="variable">data</span>&nbsp;<span class="method-specializer">hash-table</span>))</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a hash table as a JSON object.</pre>
    </div>
   </div>
   <div class="definition" id="gjifsmgf">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Method</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>The default encoding method.
Signals an ‘<a href="#urzpx82v"><span class="symbol">encoding-error</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="hhycg357">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode-array</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode Lisp data as a JSON array.

Argument DATA is the Lisp data to be serialized as a JSON array.
 Value has to be a sequence, i.e. a vector or a list.

Mostly useful for binding ‘<a href="#kz8bt32s"><span class="symbol">*list-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="rmwttplq">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode-false</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Constantly print a JSON ‘false’ value.

Mostly useful for binding ‘<a href="#bzgbiy7g"><span class="symbol">*nil-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="ntl25f58">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode-list</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a list by calling ‘<a href="#kz8bt32s"><span class="symbol">*list-encoder*</span></a>’.

Mostly useful for binding ‘<a href="#bzgbiy7g"><span class="symbol">*nil-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="zo2sttpj">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode-null</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Constantly print a JSON ‘null’ value.

Mostly useful for binding ‘<a href="#bzgbiy7g"><span class="symbol">*nil-encoder*</span></a>’.</pre>
    </div>
   </div>
   <div class="definition" id="pjb5bkh2">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">encode-object</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">data</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode Lisp data as a JSON object.

Argument DATA is the Lisp data to be serialized as a JSON object.
 Value has to be a hash table, an associated list, or a property list.
If DATA is a list, the value of the ‘<a href="#p8dkkdin"><span class="symbol">*object-as*</span></a>’ special variable
 affects the interpretation of DATA.

Mostly useful for binding the ‘<a href="#kz8bt32s"><span class="symbol">*list-encoder*</span></a>’ special variable.</pre>
    </div>
   </div>
   <div class="definition" id="pbpmsoka">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">object-member</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">key</span> <span class="variable">value</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a JSON object member.
See the ‘<a href="#wmbtovb5"><span class="symbol">with-object</span></a>’ macro.</pre>
    </div>
   </div>
   <div class="definition" id="p8bs7kiw">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">parse</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">source</span> <span class="lambda-list-keyword">&amp;key</span> <span class="variable">junk-allowed</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Read a JSON value.

First argument SOURCE is the input object.  Value is either a
 stream, a string, or a pathname.  The special value ‘t’ is
 equal to ‘*standard-input*’
If keyword argument JUNK-ALLOWED is true, do not signal an error
 of type ‘<a href="#sacacfxu"><span class="symbol">syntax-error</span></a>’ if a non-whitespace character occurs after
 the JSON value.  Default value is false.

The ‘parse’ function expects exactly one JSON value.  Any value
is accepted, not only an object or array.  Optional leading and
trailing whitespace is ignored.

Return value is the Lisp representation of the JSON value.
Secondary value is the position where the parsing ends, or
‘nil’ if the position can not be determined.

Exceptional situations:

   * Signals an ‘end-of-file’ error if the input ends in the
     middle of a JSON value.

   * Signals a ‘<a href="#sacacfxu"><span class="symbol">syntax-error</span></a>’ if the input contains an invalid
     JSON structure.

   * May signal an ‘arithmetic-error’ if a JSON number can not
     be represented as a Lisp number.

   * Signals a ‘program-error’ if JSON objects are parsed as
     hash tables, ‘<a href="#hkv47zbo"><span class="symbol">*allow-duplicate-object-keys*</span></a>’ is bound to
     ‘:append’, and a duplicate object member occurs.</pre>
    </div>
   </div>
   <div class="definition" id="gb3jzxlt">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">serialize</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">destination</span> <span class="variable">data</span> <span class="lambda-list-keyword">&amp;key</span> <span class="variable">pretty</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Print a Lisp data structure as a JSON value.

First argument DESTINATION is the output object.  Value is either a
 stream, a string, or a pathname.  The special value ‘t’ is equal to
 ‘*standard-output*’ and ‘nil’ means to return a string.
Second argument DATA is the Lisp data structure to be serialized.
If keyword argument PRETTY is true, pretty print the JSON value in
 a compact format.  Default is false.

The actual serialization of Lisp data as a JSON value is performed
by the ‘<a href="#sgtiipkk"><span class="symbol">encode</span></a>’ methods (which see).

If DESTINATION is a stream, a string, a pathname, or ‘t’, then the
result is ‘nil’.  Otherwise, the result is a string containing the
output.

Exceptional situations:

   * Signals an ‘<a href="#urzpx82v"><span class="symbol">encoding-error</span></a>’ if the Lisp data can not be
     encoded as a JSON value.

   * May signal an ‘arithmetic-error’ if a rational number is
     converted to a floating-point number.

Notes:

If the pretty printer is disabled, JSON output is just a flat
sequence of characters.  For example:

     [{"foo" : 42, "bar" : ["baz", "hack"]}, null]

There is no explicit or implicit line break since all control
characters are escaped.  While this is fast and machine readable,
it's difficult for humans to reveal the structure of the data.

If the pretty printer is enabled, JSON output is more visually
appearing.  Here is the same example as above but pretty printed:

     [{"foo" : 42,
       "bar" : ["baz",
                "hack"]},
      null]

Explicit line breaks occur after object members and array elements
and the items of these compound structures are lined up nicely.</pre>
    </div>
   </div>
   <div class="definition" id="w5g4wwig">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">serializer</span></a></td>
	<td class="lambda-list"></td>
	<td class="category"><span class="category">Constant</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Format control for printing a Lisp data structure as a JSON value.
The value of the ‘*print-pretty*’ special variable determines if the
JSON output is pretty printed.  For example,

     (format t "JSON: ~@?~%" serializer #((("foo" . 42) ("bar" . #("baz" "hack"))) :null))

may print

     JSON: [{"foo" : 42,
             "bar" : ["baz",
                      "hack"]},
            null]

The value of this constant is a format control function that follows
the conventions for a function created by the ‘formatter’ macro.  See
also the ‘<a href="#hk3d2sdm"><span class="symbol">serializer</span></a>’ function for another method for how to print
JSON values with the ‘format’ function.</pre>
    </div>
   </div>
   <div class="definition" id="hk3d2sdm">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">serializer</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="variable">stream</span> <span class="variable">data</span> <span class="lambda-list-keyword">&amp;optional</span> <span class="variable">colonp</span> <span class="variable">at-sign-p</span> <span class="lambda-list-keyword">&amp;rest</span> <span class="variable">parameters</span>)</span></td>
	<td class="category"><span class="category">Function</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Format function for printing a Lisp data structure as a JSON value.

First argument STREAM is the output stream.
Second argument DATA is the Lisp data structure to be serialized.
If optional third argument COLONP is true, output the JSON value in
 a pretty printed format.  Default is false.
The remaining arguments are ignored.

This function is designed so that it can be called by a slash format
directive, i.e. ‘~/serializer/’.  If the colon modifier is given, use
the pretty printer.  For example,

     (format t "JSON: ~/serializer/~%" #((("foo" . 42) ("bar" . #("baz" "hack"))) :null))

prints

     JSON: [{"foo" : 42, "bar" : ["baz", "hack"]}, null]

whereas

     (format t "JSON: ~:/serializer/~%" #((("foo" . 42) ("bar" . #("baz" "hack"))) :null))

prints

     JSON: [{"foo" : 42,
             "bar" : ["baz",
                      "hack"]},
            null]

See also the ‘<a href="#w5g4wwig"><span class="symbol">serializer</span></a>’ constant variable for another method for
how to print JSON values with the ‘format’ function.</pre>
    </div>
   </div>
   <div class="definition" id="clobtzta">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">with-array</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="lambda-list-keyword">&amp;body</span> <span class="variable">body</span>)</span></td>
	<td class="category"><span class="category">Macro</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a JSON array.

The BODY calls ‘(array-element VALUE)’ to encode an array element.</pre>
    </div>
   </div>
   <div class="definition" id="nzljpmtz">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">with-default-values</span></a></td>
	<td class="lambda-list"><span class="lambda-list">((<span class="lambda-list-keyword">&amp;rest</span> <span class="variable">ignored</span>) <span class="lambda-list-keyword">&amp;body</span> <span class="variable">body</span>)</span></td>
	<td class="category"><span class="category">Macro</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Establish a lexical environment with all special variables bound
to their default values.</pre>
    </div>
   </div>
   <div class="definition" id="wmbtovb5">
    <div class="signature">
     <table class="signature">
      <colgroup>
       <col />
       <col />
       <col />
      </colgroup>
      <tbody>
       <tr>
	<td class="symbol"><a href="#contents"><span class="symbol">with-object</span></a></td>
	<td class="lambda-list"><span class="lambda-list">(<span class="lambda-list-keyword">&amp;body</span> <span class="variable">body</span>)</span></td>
	<td class="category"><span class="category">Macro</span></td>
       </tr>
      </tbody>
     </table>
    </div>
    <div class="documentation">
     <pre>Encode a JSON object.

The BODY calls ‘(object-member KEY VALUE)’ to encode the key/value
pair of an object member.</pre>
    </div>
   </div>
  </div>
 </body>
</html>
